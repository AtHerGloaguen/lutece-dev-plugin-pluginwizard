<#include "sidebar.html" />   

<div class="row">

    <div class="span3">             
        <@sidebar step="model" />
        <div class="well">         
            #i18n{pluginwizard.pluginwizard_modify_business_class.pageHelp}   
        </div>  
    </div>


    <div class="span8">

        <form class="form form-horizontal" method="post"  action="jsp/site/Portal.jsp">  
            <input type="hidden" name="page" value="pluginwizard" />        
            <input type="hidden" name="business_class_id" value="${business_class.id}"/>                                                              
            <fieldset>
                <legend>#i18n{pluginwizard.pluginwizard_modify_business_class.pageTitle}</legend>

                <div class="control-group">
                    <label class="control-label">#i18n{pluginwizard.pluginwizard_modify_business_class.labelBusinessClass} *:</label>      
                    <div class="controls">    
                        <input type="text" name="business_class" value="${business_class.businessClass}" size="30" />      
                    </div>  
                </div>

                <div class="control-group">
                    <label class="control-label">#i18n{pluginwizard.pluginwizard_modify_business_class.labelBusinessTableName} *: </label>      
                    <div class="controls">  
                        <input class="input-xlarge" type="text" name="business_table_name" value="${business_class.businessTableName}" size="30" />      
                    </div>                       
                </div>              

                <div class="control-group">
                    <label class="control-label">#i18n{pluginwizard.pluginwizard_modify_business_class.labelAdminFeatures} : </label>      
                    <div class="controls">       
                        <@comboWithParams name="id_feature" default_value="all" items=combo_admin_features  additionalParameters="class=\"input-xlarge\"" />      
                    </div>                
                </div>

                <div class="form-actions">                                          
                    <button name="action_modifyBusinessClass" class="btn btn-primary" type="submit">
                        #i18n{pluginwizard.pluginwizard_modify_business_class.buttonModifyClass}
                    </button>                    
                    <button name="action_validateAttributes" class="btn" type="submit">
                        #i18n{pluginwizard.pluginwizard_modify_business_class.buttonBack}
                    </button>                                                             
                </div>
            </fieldset>
        </form>

        <form class="form pull-right" method="post"
              action="jsp/site/Portal.jsp"><input
                type="hidden" name="page" value="pluginwizard" />
            <input type="hidden" name="plugin_id" value="${plugin_model.idPlugin}" /> 
            <input type="hidden" name="business_class_id" value="${business_class.id}"/>   

            <button type="submit" name="goToCreateAttribute" class="btn btn-primary">
                <i class="icon-plus icon-white"></i>
                #i18n{pluginwizard.pluginwizard_modify_business_class.labelCreateAttribute}
            </button> 
        </form>                                                                              
        <h4>#i18n{pluginwizard.pluginwizard_modify_business_class.labelFielsetAttributes}</h4>
        
        <#include "errors_handler.html" />

        <table class="table table-condensed table-striped">

            <thead>
                <tr>
                    <th>#i18n{pluginwizard.pluginwizard_modify_business_class.labelAttributeName}</th>
                    <th>#i18n{pluginwizard.pluginwizard_modify_business_class.labelAttributeType}</th>
                    <th>#i18n{pluginwizard.pluginwizard_modify_business_class.labelNotNull}</th>
                    <th>#i18n{pluginwizard.pluginwizard_modify_business_class.labelMaxLength}</th>
                    <th>#i18n{pluginwizard.pluginwizard_modify_business_class.labelAttributeKey}</th>
                    <th>#i18n{pluginwizard.pluginwizard_modify_business_class.labelAttributeDescription}</th>
                    <th>#i18n{pluginwizard.pluginwizard_modify_business_class.labelAttributeAction}</th>

                </tr>
            </thead>

            <tbody>
                <#if business_class.attributes?? >
                <#list business_class.attributes as attribute>
                <tr>
                    <td>${attribute.attributeName}</td>
                    <td>${attribute.typeDescription}</td>
                    <td>
                        <#if attribute.notNull>
                        <span class="label"><i class="icon-ok icon-white"></span>
                        </#if>
                    </td>
                    <td>
                        <#if attribute.maxLength &gt; 0 >
                        ${attribute.maxLength}
                        </#if>
                    </td>
                    <td><#if attribute.isPrimary>
                        <span class="label">key</span>
                        </#if>
                    </td>
                    <td><#if attribute.isDescription>
                        <span class="label">label</span></#if>
                    </td>

                    <td>
                        <a href="jsp/site/Portal.jsp?page=pluginwizard&action=modify_attribute&plugin_id=${plugin_model.idPlugin}&attribute_id=${attribute.id}&business_class_id=${business_class.id}"   
                           class="btn btn-primary btn-small"
                           title="#i18n{pluginwizard.pluginwizard_modify_business_class.buttonModifyAttribute}" >
                            <i class="icon-edit icon-white"></i>
                        </a>
                        <a href="jsp/site/Portal.jsp?page=pluginwizard&action=remove_attribute&plugin_id=${plugin_model.idPlugin}&attribute_id=${attribute.id}&business_class_id=${business_class.id}"   
                           class="btn btn-danger btn-small"
                           title="#i18n{pluginwizard.pluginwizard_modify_business_class.buttonRemoveAttribute}" >
                            <i class="icon-trash icon-white"></i>
                        </a>
                    </td>
                    </#list> 
                </tr>
                </#if>
            </tbody>
        </table>
    </div>                                              
</div>
